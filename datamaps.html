<html>
<head>
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="http://d3js.org/topojson.v1.min.js"></script>
	<script src="js/datamaps.js"></script>
	<script src="js/datamaps.usa.min.js"></script>
</head>
<body>
	<div id="container" style="position: relative; width: 1000; height: 1000px;"></div>
	<script>
		console.log("Drawing Map...")

	    var map = new Datamap({
	    	element: document.getElementById('container'),
	    	scope: 'usa',
	    	setProjection: projection,
	    	done: function() {
	    		console.log("Map Complete");
	    	}, 
	    	geographyConfig: {
            popupTemplate: function(geo, data) {
                return ['<div class="hoverinfo"><strong>' + geo.properties.name + '</strong></div>'].join('');
            },
            popupOnHover: false, //disable the popup while hovering
        }
	    });

	    // Configure projection (scale, etc)
	    function projection(element){
	    	var boston = [-71.2, 42.9];

			var projection = d3.geo.equirectangular()
				.center(boston)
				.scale(20000);
			  	// .rotate([4.4, 0])
			  	// .translate([element.offsetWidth / 2, element.offsetHeight / 2]);
			

			return { 
				path: d3.geo.path().projection(projection), 
				projection: projection 
			};
	    }

	    // enable state names
	    // map.labels()

	    var bubbles = [{
	      	name: "Test",	
	      	latitude: 42.3386904,
	        longitude: -71.0884613,
	        radius: 10,
	      }
	    ];

		//draw bubbles for bubbles
		map.bubbles(bubbles, {
		    popupTemplate: function (geo, data) { 
		            return ['<div class="hoverinfo">' +  data.name + '</div>'].join('');
		    }
		});
	</script>
</body>

</html>