<html>
<head>
	<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
	<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>
	<script type="text/javascript" src="/js/xml.min.js"></script>

	 <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
	  <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
	  <script src="js/convert.js"></script>

</head>
<body>
	<h1>Hello</h1>

	<p id="data"></p>

	<div id="map" style="height: 580px;"></div>

	<script type="text/javascript">

		console.log("Loading...");

		var fileUrl = "data/josh.xml";

		resp = Convert.convertData(fileUrl);
		console.log(resp)

		// http://leafletjs.com/examples/quick-start.html
		function setupMap(callback){

			// Make map a GLOBAL var
			map = L.map('map').setView([42.342296, -71.0873438], 13);

			L.tileLayer('http://{s}.tiles.mapbox.com/v3/alexjohnson505.k2pknn10/{z}/{x}/{y}.png', {
		    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
		    maxZoom: 18	
			}).addTo(map);

			callback();
		}

		function addDataToMap(data){
			_.each(data, function(point){
				var circle = L.circle([point.location[1], point.location[0]], 50, {
				    color: 'red',
				    fillColor: '#f03',
				    fillOpacity: 0.2
				}).addTo(map);

			})
		}

	</script>
</body>
</html>